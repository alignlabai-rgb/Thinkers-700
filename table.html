<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰äººä¸€è¦§ | Thinkers Pioneer Hub</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Noto+Sans+JP:wght@400;500;700&display=swap"
        rel="stylesheet">
    <style>
        .filter-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .filter-group select,
        .filter-group input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 0.6rem 1rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            min-width: 160px;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .filter-group input::placeholder {
            color: var(--text-secondary);
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }

        .stats-bar .count {
            font-weight: 700;
            color: var(--accent-color);
        }

        .reset-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .reset-btn:hover {
            background: var(--accent-color);
            color: #000;
        }

        .sortable {
            cursor: pointer;
            user-select: none;
        }

        .sortable:hover {
            color: var(--accent-color);
        }

        .sortable::after {
            content: ' â‡…';
            opacity: 0.4;
        }

        .sortable.asc::after {
            content: ' â†‘';
            opacity: 1;
        }

        .sortable.desc::after {
            content: ' â†“';
            opacity: 1;
        }

        .os-tag-small {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.5);
            border-radius: 4px;
            font-size: 0.7rem;
            color: #a78bfa;
            margin: 0.1rem;
        }

        .rank-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.8rem;
            color: #000;
        }

        .rank-badge.top10 {
            background: linear-gradient(135deg, #fcd34d, #eab308);
            box-shadow: 0 0 10px rgba(234, 179, 8, 0.5);
        }

        .rank-badge.top50 {
            background: linear-gradient(135deg, #94a3b8, #64748b);
        }

        .rank-badge.regular {
            background: rgba(100, 116, 139, 0.3);
            color: var(--text-secondary);
        }

        table tbody tr {
            transition: background 0.2s;
        }

        table tbody tr:hover {
            background: rgba(139, 92, 246, 0.1);
        }
    </style>
</head>

<body>
    <header class="container">
        <h1>Thinkers Explorer</h1>
        <p class="subtitle">çŸ¥ã®OSã‚’æ›¸ãæ›ãˆãŸ700äººã®æ€æƒ³å®¶ãŸã¡</p>

        <nav class="nav-tabs">
            <a href="index.html" class="nav-btn">ã‚«ãƒ¼ãƒ‰è¡¨ç¤º</a>
            <a href="table.html" class="nav-btn active">ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º</a>
        </nav>
    </header>

    <main class="container">
        <!-- Filter Bar -->
        <div class="filter-bar">
            <div class="filter-group">
                <label>ğŸ” æ¤œç´¢</label>
                <input type="text" id="searchInput" placeholder="åå‰ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰...">
            </div>
            <div class="filter-group">
                <label>ğŸ“š OSé ˜åŸŸ</label>
                <select id="osFilter">
                    <option value="">ã™ã¹ã¦</option>
                    <option value="å“²å­¦OS">å“²å­¦OS</option>
                    <option value="å¿ƒç†OS">å¿ƒç†OS</option>
                    <option value="ç¤¾ä¼šOS">ç¤¾ä¼šOS</option>
                    <option value="å€«ç†OS">å€«ç†OS</option>
                    <option value="æ³•OS">æ³•OS</option>
                    <option value="ç§‘å­¦OS">ç§‘å­¦OS</option>
                    <option value="æ•°å­¦OS">æ•°å­¦OS</option>
                    <option value="æŠ€è¡“OS">æŠ€è¡“OS</option>
                    <option value="èŠ¸è¡“OS">èŠ¸è¡“OS</option>
                    <option value="æ•™è‚²OS">æ•™è‚²OS</option>
                    <option value="è¨€èªOS">è¨€èªOS</option>
                    <option value="å®—æ•™OS">å®—æ•™OS</option>
                    <option value="æ”¿æ²»OS">æ”¿æ²»OS</option>
                    <option value="çµŒæ¸ˆOS">çµŒæ¸ˆOS</option>
                </select>
            </div>
            <div class="filter-group">
                <label>â³ æ™‚ä»£</label>
                <select id="eraFilter">
                    <option value="">ã™ã¹ã¦</option>
                    <option value="å¤ä»£">å¤ä»£</option>
                    <option value="ä¸­ä¸–">ä¸­ä¸–</option>
                    <option value="è¿‘ä»£">è¿‘ä»£</option>
                    <option value="ç¾ä»£">ç¾ä»£</option>
                </select>
            </div>
            <div class="filter-group">
                <label>â†•ï¸ ä¸¦ã³æ›¿ãˆ</label>
                <select id="sortSelect">
                    <option value="rank-asc">é‡è¦åº¦é † â†‘</option>
                    <option value="rank-desc">é‡è¦åº¦é † â†“</option>
                    <option value="name-asc">åå‰é † (ã‚â†’)</option>
                    <option value="name-desc">åå‰é † (ã‚“â†’)</option>
                </select>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <span>è¡¨ç¤ºä¸­: <span class="count" id="resultCount">0</span> / <span id="totalCount">0</span> äºº</span>
            <button class="reset-btn" onclick="resetFilters()">ãƒ•ã‚£ãƒ«ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
        </div>

        <!-- Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 60px;">Rank</th>
                        <th>åå‰ / è‹±å</th>
                        <th>æ´»å‹•æ™‚æœŸ</th>
                        <th>OSé ˜åŸŸ</th>
                        <th>æ ¸å¿ƒçš„ãªå¤‰é©ç‚¹</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Intellectual OS Pioneer Project.</p>
    </footer>

    <script src="data.js"></script>
    <script>
        const tableBody = document.getElementById('tableBody');
        const searchInput = document.getElementById('searchInput');
        const osFilter = document.getElementById('osFilter');
        const eraFilter = document.getElementById('eraFilter');
        const sortSelect = document.getElementById('sortSelect');
        const resultCount = document.getElementById('resultCount');
        const totalCount = document.getElementById('totalCount');

        // Helper: Get era from years string
        function getEra(years) {
            if (years.includes('å¤ä»£')) return 'å¤ä»£';
            if (years.includes('ä¸­ä¸–')) return 'ä¸­ä¸–';
            if (years.includes('è¿‘ä»£') || years.includes('17') || years.includes('18')) return 'è¿‘ä»£';
            if (years.includes('ç¾ä»£') || years.includes('20ä¸–ç´€') || years.includes('19ä¸–ç´€') || years.includes('21ä¸–ç´€')) return 'ç¾ä»£';
            // Fallback based on pattern
            if (years.includes('ã‚®ãƒªã‚·ã‚¢') || years.includes('ãƒ­ãƒ¼ãƒ')) return 'å¤ä»£';
            if (years.includes('ã‚¤ã‚¹ãƒ©ãƒ ') && (years.includes('9') || years.includes('10') || years.includes('11') || years.includes('12') || years.includes('13'))) return 'ä¸­ä¸–';
            return 'ç¾ä»£'; // Default
        }

        // Helper: Get school as array
        function getSchools(school) {
            if (Array.isArray(school)) return school;
            return [school];
        }

        function renderTable() {
            const query = searchInput.value.toLowerCase();
            const os = osFilter.value;
            const era = eraFilter.value;
            const [sortField, sortDir] = sortSelect.value.split('-');

            let filtered = thinkers.filter(p => {
                // Text search
                const matchesSearch = !query ||
                    p.name.toLowerCase().includes(query) ||
                    p.en_name.toLowerCase().includes(query) ||
                    p.summary.toLowerCase().includes(query);

                // OS filter
                const schools = getSchools(p.school);
                const matchesOS = !os || schools.includes(os);

                // Era filter
                const pEra = getEra(p.years);
                const matchesEra = !era || pEra === era;

                return matchesSearch && matchesOS && matchesEra;
            });

            // Sort
            filtered.sort((a, b) => {
                if (sortField === 'rank') {
                    const diff = (a.rank || 999) - (b.rank || 999);
                    return sortDir === 'asc' ? diff : -diff;
                } else if (sortField === 'name') {
                    const diff = a.name.localeCompare(b.name, 'ja');
                    return sortDir === 'asc' ? diff : -diff;
                }
                return 0;
            });

            // Render
            tableBody.innerHTML = '';
            filtered.forEach((p, index) => {
                const row = document.createElement('tr');
                const schools = getSchools(p.school);
                const rank = p.rank || index + 1;

                let rankClass = 'regular';
                if (rank <= 10) rankClass = 'top10';
                else if (rank <= 50) rankClass = 'top50';

                const nameContent = p.detail_page
                    ? `<a href="${p.detail_page}" style="color:var(--accent-color); text-decoration:none; font-weight:600;">${p.name}</a><div style="font-size:0.75rem; color:var(--text-secondary);">${p.en_name}</div>`
                    : `<strong>${p.name}</strong><div style="font-size:0.75rem; color:var(--text-secondary);">${p.en_name}</div>`;

                const schoolTags = schools.map(s => `<span class="os-tag-small">${s}</span>`).join('');

                row.innerHTML = `
                    <td><span class="rank-badge ${rankClass}">${rank}</span></td>
                    <td>${nameContent}</td>
                    <td>${p.years}</td>
                    <td>${schoolTags}</td>
                    <td style="font-size:0.9rem;">${p.summary}</td>
                `;
                tableBody.appendChild(row);
            });

            // Update counts
            resultCount.textContent = filtered.length;
            totalCount.textContent = thinkers.length;
        }

        function resetFilters() {
            searchInput.value = '';
            osFilter.value = '';
            eraFilter.value = '';
            sortSelect.value = 'rank-asc';
            renderTable();
        }

        // Event listeners
        searchInput.addEventListener('input', renderTable);
        osFilter.addEventListener('change', renderTable);
        eraFilter.addEventListener('change', renderTable);
        sortSelect.addEventListener('change', renderTable);

        // Initialize
        renderTable();
    </script>
</body>

</html>